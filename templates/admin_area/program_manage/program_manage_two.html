{% extends 'admin_area/base.html' %}
{% block define %}
    <script>
        $('#page_title').text('项目管理');
        $('#message_manange').addClass('active');
        $('#advertisement_manage').addClass('active')
    </script>
      <table class="table">
           <thead>
             <tr>
                 <ol class="breadcrumb">
                     <li><a href="program_manage">维修与安装</a></li>
                     <li class="active">{{ program_p.item_name }}</li>
                 </ol>
             </tr>
             <tr>
                 <h6 style="padding-bottom: 1%">
                 {{ program_p.item_name }}的详细项目列表(排序ID：{{ program_p.sort_id }})
                     {% if program_p.icon %}
                     <img src="{{ program_p.icon }}" style="height: 40px;width: 40px;"/>
                 {% endif %}
                     <button id="delete_p" class="btn btn-danger" style="float: right;margin-right: 2%">删除分类</button>
                     <a id="edit_p" role="button" href="edit_program_p_detail?item_id={{ program_p.id }}" class="btn btn-default" style="float: right;margin-left: 2%;margin-right: 1%">修改分类</a>
                 </h6>
                 <script>
                     $('#delete_p').click(function(){
                         var r = confirm("您确定要删除该分类并且同时删除所有子项目？");
                         if (r){
                             window.location.href = "delete_program_p?item_id={{ program_p.id }}"
                         }
                     })
                 </script>
             </tr>
           </thead>
           <tbody>
              <tr style="background-color: #1abc9c; color: #ffffff">
                  <th>排序ID</th>
                  <th>项目名称</th>
                  <th style="max-width: 60px;padding-right:0">
                      操作
                  </th>
              </tr>
              {% for item in programs %}
              <tr>
                  <td>{{ item.sort_id }}</td>
                  <td>{{ item.item_name }}</td>
                  <td style="max-width: 60px;padding-right:0">
                     <a role="button" href="edit_program_detail?item_p_id={{ program_p.id }}&item_id={{ item.id }}" class="btn btn-sm btn-default">修改</a>
                     <button class="btn btn-sm btn-danger" onclick="delete_item_detail('{{ item.id }}', '{{ item.parent_item.id }}')">删除</button>
                  </td>
              </tr>
              {% endfor %}
           </tbody>
           <script>
               function delete_item_detail(item_id, item_p_id){
                   r = confirm("确定删除该项目?");
                   if(r == true){
                       window.location.href = "delete_program_detail?item_id="+item_id+"&item_p_id="+item_p_id;
                   }
               }
           </script>
      </table>
  <div class="text-right">
      <a role="button" href="edit_program_detail?item_p_id={{ program_p.id }}" class="btn btn-lg btn-success" style="margin-bottom:2%;width: 250px;font-size: 20px;">添加</a>
  </div>
{% endblock %}