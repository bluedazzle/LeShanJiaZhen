{% extends 'admin_area/base.html' %}
{% block define %}
    <script>
        $('#page_title').text('广告管理')
    </script>
<div class="col-md-12 col-lg-12 text-center">
<h6>请选择图片文件(JPG/PNG/JEPG，400 x 200)</h6>
<form name="form0" id="form0" >
  <input type="file" name="file0" id="file0" multiple="multiple" style="margin-left: 40%;line-height: 1;font-size: 16px;"/><br>
<img style="width: 500px;height: 200px;" src="" id="img0" >
</form>
<button class="disabled btn btn-success" style="margin-top: 1%;margin-left: 43%" id="submit">提交</button>
<p id="warning"></p>
</div>
<script>
$("#file0").change(function(){
	var objUrl = getObjectURL(this.files[0]);
	console.log("objUrl = "+objUrl) ;
	if (objUrl) {
		$("#img0").attr("src", objUrl);
        $('#img0').load(function(){
            var image = new Image();
            image.src = $('#img0').attr('src');
            var height = image.height;
            var width = image.width;
            if(height==200&&width==400){
                $('#submit').removeClass('disabled')
            }
            else{
                $('#submit').addClass('disabled');
                $('#warning').text('图片像素不正确，请使用400 x 200像素的图片')
            }
        })
	}
}) ;

//建立一個可存取到該file的url
function getObjectURL(file) {
	var url = null ;
	if (window.createObjectURL!=undefined) { // basic
		url = window.createObjectURL(file) ;
	} else if (window.URL!=undefined) { // mozilla(firefox)
		url = window.URL.createObjectURL(file) ;
	} else if (window.webkitURL!=undefined) { // webkit or chrome
		url = window.webkitURL.createObjectURL(file) ;
	}
	return url ;
}
</script>
<div class="row" style="margin-top: 5%">
 {% for i in items %}
  <div class="col-md-4 col-md-4 text-right" style="margin-top: 2%">
    <a href="/img/advertisement/test1.jpg" class="thumbnail">
      <img src="/img/advertisement/test1.jpg" alt="...">
    </a>
    <a href="#" style="color: red">删除 test1.jpg</a>
  </div>
 {% endfor %}
</div>
{% endblock %}